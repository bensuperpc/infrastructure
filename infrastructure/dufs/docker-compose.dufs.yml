services:
  # dufs
  dufs:
    image: sigoden/dufs:latest
    container_name: dufs
    profiles:
      - dufs
    user: 1000:1000
    restart: on-failure:5
    depends_on:
      - caddy
    env_file:
      - ./dufs/env/dufs.env
    volumes:
      - dufs_data:/data
      - qbittorrent_data:/data/torrent1:ro
      - transmission_data:/data/torrent2:ro
      - jellyfin_data_public:/data/jellyfin:ro
    networks:
      - infra-network
    security_opt:
      - no-new-privileges:true

volumes:
  dufs_data:
    name: dufs_data
  transmission_data:
    name: transmission_data
  qbittorrent_data:
    name: qbittorrent_data
  jellyfin_data_public:
    name: jellyfin_data_public